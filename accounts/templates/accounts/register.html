{% extends 'base.html' %}
{% load static %}
{% load bootstrap5 %}


{% block title %}ثبت نام{% endblock %}
{% block header %}
<link href="{% static 'js/date-picker/assets/css/daterangepicker.css' %}" rel="stylesheet" type="text/css"
          media="all"/>
<link href="{% static 'js/date-picker/assets/css/datepicker-theme.css' %}" rel="stylesheet" type="text/css"
          media="all"/>
{% endblock %}
{% block content %}

    <!-- Section: Design Block -->
<!-- Section: Design Block -->
<section class="text-center">
  <!-- Background image -->
  <div class="p-5 bg-image" style="
        background-image: url('{% static 'img/1920x600/img6.jpg' %}');
        background-repeat:no-repeat;
        background-position:center;
        height: 40vh;
        "></div>
  <!-- Background image -->

  <div class="card mx-4 mx-md-5 shadow-5-strong" style="
        margin-top: -100px;
        background: hsla(0, 0%, 100%, 0.8);
        backdrop-filter: blur(30px);
        ">
    <div class="card-body py-5 px-md-5">
    <button type="button" class="btn col-lg-2 col-xl-2 mb-4 position-absolute top-0 left-0 p-3 d-flex justify-content-center align-content-center">
          <a href="{% url 'home' %}" class="text-primary mr-1">
          برگشت به خانه
          </a>
          <i><svg style="width: 20px; height: 20px;" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
            <path stroke-linecap="round" stroke-linejoin="round" d="M9 15L3 9m0 0l6-6M3 9h12a6 6 0 010 12h-3" />
          </svg>
          </i>
        </button>
      <div class="row d-flex justify-content-center">
        <div class="col-lg-8">
          <h2 class="fw-bold mb-5">حساب جدید بسازید</h2>
          <form action="" method="POST" class="form">
              {% csrf_token %}
            <!-- 2 column grid layout with text inputs for the first and last names -->

    <h5 class="fw-bold mb-5">اطلاعات حساب کاربری</h5>
              <div class="row">
              <!-- Username input -->
                <div class="col-lg-6 col-md-6 mb-4">
                    <div class="form-outline">
                        <a title="اجباری"><span class="text-danger font-size-1 fas fa-asterisk"></span> {{registerForm.phone.label_tag}}</a>
                        {{registerForm.phone}}
                        {{registerForm.phone.errors}}
                    </div>
                </div>
             <!-- Email input -->
                <div class="col-lg-6 col-md-6 mb-4">
                    {{registerForm.email.label_tag}}
                    {{registerForm.email}}
                    {{registerForm.email.errors}}
                </div>
            </div>
            <div class="row">
                 <!-- Password input -->
                <div class="col-lg-6 col-md-6 mb-4">
                    <div class="form-outline">
                        <a title="اجباری"><span class="text-danger font-size-1 fas fa-asterisk"></span> {{registerForm.password.label_tag}}</a>
                        {{registerForm.password}}
                        <p class="font-size-14 mt-2" style="color: #f08c00;">رمز عبور باید حداقل 8 کاراکتر باشد</p>
                        {{registerForm.password.errors}}
                    </div>
                </div>

                <!-- Confirm Password input -->
                <div class="col-lg-6 col-md-6 mb-4">
                    <a title="اجباری"><span class="text-danger font-size-1 fas fa-asterisk"></span> {{registerForm.confirm_password.label_tag}}</a>
                    {{registerForm.confirm_password}}
                    {{registerForm.confirm_password.errors}}
                </div>
            </div>
              <div class="border-top border-width-2 border-color-1"></div>
              <br>
           <h5 class="fw-bold mb-5">اطلاعات شخصی</h5>
            <!-- Email input -->
            <div class="row">
                <div class="col-lg-6 col-md-6 mb-4">
                    <div class="form-outline">
                        {{registerForm.first_name.label_tag}}
                        {{registerForm.first_name}}
                        {{registerForm.first_name.errors}}
                    </div>
                </div>
                <div class="col-lg-6 col-md-6 mb-4">
                    <div class="form-outline">
                        {{registerForm.last_name.label_tag}}
                        {{registerForm.last_name}}
                        {{registerForm.last_name.errors}}
                    </div>
                </div>
            </div>
              <div class="row">

                <div class="col-lg-6 col-md-6 mb-4">
                    <div class="form-outline">
                        {{registerForm.nid.label_tag}}
                        {{registerForm.nid}}
                        {{registerForm.nid.errors}}
                    </div>
                </div>
                  <div class="col-lg-6 col-md-6 mb-4">
                    <div class="form-outline">
                        {{registerForm.birthdate.label_tag}}
                        <input type="text" name="birthdate" class="form-control jalali-datepicker" placeholder="1402/04/15" required="" id="birthdate_">
                        {{registerForm.birthdate.errors}}
                    </div>
                </div>
            </div>

            <!-- Submit button -->
            <button type="submit" class="btn btn-primary btn-block mb-4">
              ثبت نام
            </button>

          </form>
            <div class="text-left  mt-3 font-size-14">
                قبلا ثبت نام کرده‌اید؟
                  <a href="{% url 'login' %}" class="text-primary">وارد شوید</a>
                </div>
        </div>
      </div>
    </div>
  </div>
</section>
<!-- Section: Design Block -->

<style>
  .invalid{
    border-color: #f03e3e;
    color: #f03e3e;
  }
  
  .invalid:focus{
    border-color: #f03e3e;
    box-shadow: 0 0 8px #ffa8a8;
  }
  
  .valid{
    border-color: #37b24d;
    color: #37b24d;
  }
  .valid:focus{
    border-color: #37b24d;
    box-shadow: 0 0 8px #8ce99a;
  }

  #id_phone::-webkit-inner-spin-button{
    display: none;
  }

  #id_phone{
    -moz-appearance: textfield;
  }

</style>

    <!--JS Date Picker -->
    <script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
    <script type="text/javascript" src="http://netdna.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
    <script src="{% static 'js/date-picker/assets/js/moment.min.js' %}" type="text/javascript"></script>
    <script src="{% static 'js/date-picker/assets/js/moment-jalaali.js' %}"></script>
    <script src="{% static 'js/date-picker/assets/js/daterangepicker-fa-ex.js' %}"></script>


<script defer>
  document.addEventListener("DOMContentLoaded", function() {
      var night;
      var isRtl = true;
      var dateFormat = isRtl ? 'jYYYY/jMM/jDD' : 'YYYY/MM/DD';
      

      $('.jalali-datepicker').daterangepicker({
          clearLabel: 'Clear',
          autoApply: true,
          opens: 'left',
          singleDatePicker: true,
          showDropdowns: true,
          jalaali: true,
          language: 'fa'
      }).on('apply.daterangepicker', function () {
          $('.tooltip').hide();
          $('.date-select').text($(this).val());
      });
  })

  const telInput = document.getElementById('id_phone')
  telInput.setAttribute('type', 'number')
  telInput.setAttribute('autocomplete',"tel")
  telInput.addEventListener('input', (e) => {
    e.target.value = '0' + (Math.abs(+e.target.value) !== 0 ? Math.abs(+e.target.value) : '')
    if(e.target.value.length !== 11) {
      telInput.classList.add('invalid')
      telInput.classList.remove('valid')
    }
    else {
      telInput.classList.remove('invalid')
      telInput.classList.add('valid')
    }
  })

  const passInput = document.getElementById('id_password')
  passInput.addEventListener('input', (e) => {
    if(e.target.value.length < 8) {
      passInput.classList.add('invalid')
      passInput.classList.remove('valid')
    }
    else {
      passInput.classList.remove('invalid')
      passInput.classList.add('valid')
    }
  })

  const passConInput = document.getElementById('id_confirm_password')
  passConInput.addEventListener('input', (e) => {
    if(e.target.value !== passInput.value) {
      passConInput.classList.add('invalid')
      passConInput.classList.remove('valid')
    }
    else {
      passConInput.classList.remove('invalid')
      passConInput.classList.add('valid')
    }
  })
</script>
{% endblock %}
